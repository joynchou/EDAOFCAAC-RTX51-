C51 COMPILER V8.05a   SETUP                                                                07/18/2017 17:09:27 PAGE 1   


C51 COMPILER V8.05a, COMPILATION OF MODULE SETUP
OBJECT MODULE PLACED IN .\setup.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\SOFTWARE\TASK\setup.c LARGE BROWSE DEBUG OBJECTEXTEND PRINT(.\setup.l
                    -st) TABS(2) OBJECT(.\setup.obj)

line level    source

   1          /************************************************************
   2          * ç»„ç»‡åç§°ï¼?
   3          * æ–‡ä»¶åç§°: K:\å•ç‰‡æœºç›¸å…³\ç”µå­å¤§èµ›ç¨‹åºæ¡†æ¶\SOFTWARE\TASK\SETUP.C
   4          * ä½œè€?     å‘¨æ™¨é˜?
   5          * ç‰ˆæœ¬:    
   6          * æ—¥æœŸ:     2017/07/18
   7          * æè¿°:   åˆå§‹åŒ–å™¨ä»¶å’Œæµ‹è¯•å™¨ä»¶ä½¿ç”¨
   8          * å†å²ä¿®æ”¹è®°å½•:
   9          * <ä½œè€? <æ—¶é—´> <ç‰ˆæœ¬ > <æè¿°>
  10          * 
  11          ***********************************************************/
  12          
  13          #include "setup.h"
  14          #include "../HARDWARE/DEVICES/SENSOR/ANGLE/ANGLE.h"
  15          #include "../../HARDWARE/DEVICES/BUTTON/BUTTON.h" 
  16          #include "../../HARDWARE/DEVICES/MOTOR/DC_MOTOR/MOTOR.h"
  17          #include "../../HARDWARE/DEVICES/LED/LED.h"
  18          #include "../../HARDWARE/BSP/USART1.h"
  19          #include "../../HARDWARE/BSP/timer.h"
  20          #include "../../HARDWARE/BSP/GPIO.h"
  21          #include "../../HARDWARE/BSP/delay.h"
  22          #include "../../HARDWARE/BSP/STC15_PWM.h"
  23          #include "../../HARDWARE/DEVICES/MOTOR/STEP_MOTOR/STEP_MOTOR.h"
  24          #include "../../HARDWARE/DEVICES/MOTOR/SERVO/SERVO.h"
  25          #include "../../HARDWARE/DEVICES/DISPLAY/1602/LCD1602.H"
  26          #include "../../HARDWARE/COMMON_HARDWARE/fixedPulser.h"
  27          
  28          #include "../ALGORITHM/PID/PID.h"
  29          
  30          
  31          
  32          
  33          /*************  ä¸²å£1åˆå§‹åŒ–å‡½æ•?*****************/
  34          /*************************************************
  35          * å‡½æ•°åç§°: void    UART1_init(unsigned long BandRate)
  36          * æè¿°: ä¸²å£1åˆå§‹åŒ–å‡½æ•?
  37          * è¾“å…¥: unsigned long BandRate ï¼šä¸²å£çš„æ³¢ç‰¹ç‡ï¼Œè¯·åœ¨æ•°å€¼ååŠ å­—æ¯?L"ï¼Œé˜²æ­¢å‡ºé—®é¢˜
  38          * è¾“å‡º: è°ƒç”¨æ­¤å‡½æ•°ä¼šå‘é€ä¸€æ®µæµ‹è¯•è¯­å?â€?STC15w4k58s4 UART1 is open â€?
  39          * è¿”å›å€? æ—?
  40          * å…¶ä»–è¯´æ˜: æ—?
  41          *************************************************/
  42          void    UART1_init(unsigned long BandRate)
  43          {
  44   1        COMx_InitDefine     COMx_InitStructure;
  45   1        COMx_InitStructure.UART_Mode = UART_8bit_BRTx;
  46   1        COMx_InitStructure.UART_BRT_Use = BRT_Timer2;
  47   1        COMx_InitStructure.UART_BaudRate = BandRate;
  48   1        COMx_InitStructure.UART_RxEnable = ENABLE;
  49   1        COMx_InitStructure.BaudRateDouble = DISABLE;
  50   1        COMx_InitStructure.UART_Interrupt = ENABLE;
  51   1        COMx_InitStructure.UART_Polity = PolityHigh;
  52   1        COMx_InitStructure.UART_P_SW = UART1_SW_P30_P31;
  53   1        COMx_InitStructure.UART_RXD_TXD_Short = DISABLE;
  54   1        USART_Configuration(USART1, &COMx_InitStructure);
C51 COMPILER V8.05a   SETUP                                                                07/18/2017 17:09:27 PAGE 2   

  55   1        // PrintString1("STC15w4k58s4's UART1 is open \r\n");   //ä¸²å£æµ‹è¯•
  56   1      }
  57          
  58          void setup(void)
  59          {
  60   1      
  61   1        UART1_init(115200L);
  62   1        timerInit();
  63   1        Board_LED_Init();
  64   1        Button_config();
  65   1        ADC_config(ADC_P10, ADC_540T);
  66   1        DC_MOTOR_config();
  67   1        LCD1602_Init();
  68   1        PID_config(PID_1,3.0f,0.02f,1.0f);
  69   1        PID_setParameterInferiorLimit(PID_1,0.0f);
  70   1        PID_setParameterUpperLimit(PID_1,200.0f);
  71   1        EA = 1;
  72   1      
  73   1      
  74   1      }
  75          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    145    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----      13
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
